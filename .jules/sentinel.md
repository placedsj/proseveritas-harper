## 2026-02-11 - Unsafe Usage of dangerouslySetInnerHTML in GlobalSearch
**Vulnerability:** The GlobalSearch component used `dangerouslySetInnerHTML` to render search result subtitles, which are derived from user-generated content stored in localStorage (e.g., medical records, evidence logs). This created a High-severity Cross-Site Scripting (XSS) vulnerability.
**Learning:** The use of `dangerouslySetInnerHTML` was intended for highlighting search terms, but the implementation only returned plain text snippets without HTML tags, making the risky attribute completely unnecessary. This shows how "future-proofing" or unused features can introduce security holes without providing any benefit.
**Prevention:** Always default to safe text rendering (e.g., `{text}`). Only use `dangerouslySetInnerHTML` when absolutely necessary and always sanitize the input first (e.g., using DOMPurify). If highlighting is needed, use a dedicated, safe highlighting component that wraps matches in `<span>` or `<mark>` tags instead of injecting raw HTML.
